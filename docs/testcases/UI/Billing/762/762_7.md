# Check Billing Center Storages quota

Test verifies that 
- billing quota for Storages specified for ***Billing Center*** is applied only to non-admin user
- Blocked by quota Non-admin user is unblocked automatically when quota action is stopped  

**Prerequisites**:
- Admin user
- Non-admin user
- *Billing center* (`<Billing_center>`) includes non-admin user and admin user from the Prerequisites
- Billing values:
  - *Storages* billing for the `<Billing_center>` from the Prerequisites for the current quarter is `<billing1>`
- Perform [762_1](762_1.md) case

| Steps | Actions | Expected results |
| :---: | --- | --- |
| 1 | Login as admin user from the prerequisites | |
| 2 | Open the **Billing** page | |
| 3 | Click **Quotas** tab |  |
| 4 | Select **Storages** tab in the **Quotas** section | | 
| 5 | Click **Add quota** button for ***Billing centers*** section | ***Create storages quota*** modal opens that contains: <li> ***Billing center*** field <li> ***Quota*** field, <li> ***Quota period*** dropdown list with values `per month`, `per quarter`, `per year` (default value is `per month`) <li> ***Actions*** section that contains ***Threshold*** and ***Action*** fields and **Add Action** button <li> **Cancel** and **Save** buttons. |
| 6 | Click into the ***Billing center*** field and select *Billing center* from the prerequisites | | 
| 7 | Input `<billing1>` value into the **Quota** field |  |
| 8 | Set `per quarter` quota period | |
| 9 | Specify follow values for Action: <br> *Threshold* - `70` <br> *Action* - `Block` | |
| 10 | Click **Save** button | The following info appears in the ***Billing centers*** section: <li> *Billing center* name <li> configured quota value <li> quota time period <li> configured pair of threshold-action |
| 11 | Wait time equals to `<billing_quotas_period>` from the [762_1](762_1.md) case Preparations and refresh page | Red circle is shown near the quota created at step 10|
| 12 | Open the **Settings** page | |
| 13 | Click the **USER MANAGEMENT** tab | |
| 14 | Click the **Users** tab | |
| 15 | Find the non-admin user from the prerequisites | User has warning `Billing quotas exceeded` |
| 16 | Hover over the warning | Tooltip that contains info <br> `Billing center <Billing_center>: storages quarterly expenses <...>$,quota <billing1>$. Actions:70% Block` |
| 17 | Logout | |
| 18 | Try to login as non-admin user from the prerequisites | The page with the authorization error appears |
| 19 | Login as admin user from the prerequisites | |
| 20 | Repeat steps 2-4 | |
| 21 | Delete quota created at step 10 | |
| 22 | Repeat steps 17-18 | User is logged in successfully |
